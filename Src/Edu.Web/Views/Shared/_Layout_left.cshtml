@using Edu.Controller.Common
@using Edu.Infrastructure.Common
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="user-scalable=no" />
    <title>@ViewBag.Title</title>
    @*<link href="~/Content/css/bootstrap-responsive.min.css" rel="stylesheet" />*@
    <script src="~/Scripts/ajaxFunc.js"></script>
    <link href="~/Content/Site.css" rel="stylesheet" />
    <link href="~/Content/css/style-responsive.css" rel="stylesheet" />
    <link href="~/Content/css/default.css" rel="stylesheet" />
    <link href="~/Content/css/style.css" rel="stylesheet" />
    <link href="~/Content/css/style-metro.css" rel="stylesheet" />
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <script src="~/Scripts/app.js"></script>
    <script src="~/Scripts/index.js"></script>
    <style>
        .user > .dropdown-menu {
            margin-left: -90px;
            color: #fff;
        }

        .sidebar-toggler {
            margin-bottom: 10px;
        }

        .caret {
            margin-left: 90px;
        }
    </style>
</head>
<body class="page-header-fixed">
<div class="header navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">
            <!-- BEGIN LOGO -->
            <a class="brand" href="~/Home/Index">
                <img width="120" height="45" src="../../Content/logo/@WebApplicationContext.ImgPath" alt="logo" />
            </a>
            <!-- END LOGO -->
            <!-- BEGIN RESPONSIVE MENU TOGGLER -->
            @*<a href="javascript:;" class="btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">
                <img src="../../Content/img/menu-toggler.png" alt="" />
            </a>*@
            <!-- END RESPONSIVE MENU TOGGLER -->
            <!-- BEGIN TOP NAVIGATION MENU -->
            <ul class="nav pull-right">
                <!-- BEGIN USER LOGIN DROPDOWN -->
                <li class="dropdown user">
                    <a href="#" id="auser" class="dropdown-toggle" data-toggle="dropdown">
                        <span class="username">@ApplicationContext.UserName</span>
                        <i class="glyphicon glyphicon-home"></i>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="~/User/Update"><i class="glyphicon glyphicon-user"></i>个人信息</a></li>
                        <li><a href="~/User/Password"><i class="glyphicon glyphicon-pencil"></i>修改密码</a></li>
                        <li><a href="~/Role/List" data-real="29"><i class="glyphicon glyphicon-wrench"></i>角色管理</a></li>
                        <li><a href="~/User/List" data-real="30"><i class="glyphicon glyphicon-list-alt"></i>员工管理</a></li>
                        <li><a href="~/User/Log" data-real="31"><i class="glyphicon glyphicon-lock"></i>系统日志</a></li>
                        <li><a href="~/Home/Index" data-real="32"><i class="glyphicon glyphicon-cog"></i>系统设置</a></li>
                        <li class="divider"></li>
                        <li><a href="~/User/SignOut"><i class="glyphicon glyphicon-off"></i>退出登录</a></li>
                    </ul>
                </li>
                <!-- END USER LOGIN DROPDOWN -->
            </ul>
            <!-- END TOP NAVIGATION MENU -->
        </div>
    </div>
</div>
<div class="page-container">
    <div class="page-sidebar nav-collapse">
        <!-- BEGIN SIDEBAR MENU -->
        <ul class="page-sidebar-menu">
            <li>
                <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
                <div class="sidebar-toggler hidden-phone"></div>
                <!-- BEGIN SIDEBAR TOGGLER BUTTON -->
            </li>
            @*<li>
                <form class="sidebar-search">
                    <div class="input-box">
                        <a href="javascript:;" class="remove"></a>
                        <input type="text" placeholder="Search..." />
                        <input type="button" class="submit" value=" " />
                    </div>
                </form>
            </li>*@
            <li class="">
                <a href="javascript:;" data-real="1">
                    <i class="glyphicon glyphicon-barcode"></i>
                    <span class="left-title">前台业务</span>
                    <span class="caret"></span>
                </a>
                <ul class="sub-menu">
                    <li><a href="#" data-real="5" data-toggle="modal" data-target="#addConsultModal">学生咨询</a></li>
                    <li><a href="#" data-real="6">咨询信息查询</a></li>
                    <li><a href="~/Sign/SignUp" data-real="7">学生报名</a></li>
                    <li class="divider"></li>
                    <li><a href="~/Entry/Renew" data-real="8">办理续费</a></li>
                    <li><a href="~/Entry/Refund" data-real="9">办理退费</a></li>
                    <li><a href="~/Entry/StopClass" data-real="10">办理停课</a></li>
                    <li><a href="~/Entry/ChangeClass" data-real="11">办理转班</a></li>
                    <li class="divider"></li>
                    <li><a href="~/Student/List" data-real="12">学生信息</a></li>
                    <li><a href="~/Home/Index" data-real="13">数据导入</a></li>
                    <li class="divider"></li>
                </ul>
            </li>
            <li class="">
                <a href="javascript:;" data-real="2">
                    <i class="glyphicon glyphicon-bookmark"></i>
                    <span class="left-title">教务教学</span>
                    <span class="caret"></span>
                </a>
                <ul class="sub-menu">
                    <li><a href="~/ClassCheck/List" data-real="17">考勤记录</a></li>
                    <li><a href="~/Home/Index" data-real="18">教师排课表</a></li>
                    <li><a href="~/Home/Index" data-real="19">教室排课表</a></li>
                    <li class="divider"></li>
                </ul>
            </li>
            <li class="">
                <a href="javascript:;" data-real="3">
                    <i class="glyphicon glyphicon-equalizer"></i>
                    <span class="left-title">财务管理</span>
                    <span class="caret"></span>
                </a>
                <ul class="sub-menu">
                    <li><a href="~/Home/Index" data-real="20">学费明细</a></li>
                    <li><a href="~/Home/Index" data-real="21">账户管理</a></li>
                    <li><a href="~/Home/Index" data-real="22">财务报表</a></li>
                    <li class="divider"></li>
                    <li><a href="~/Home/Index" data-real="23">其他收入</a></li>
                    <li><a href="~/Home/Index" data-real="24">支出项目</a></li>
                    <li class="divider"></li>
                </ul>
            </li>
            <li class="">
                <a href="javascript:;" data-real="4">
                    <i class="glyphicon glyphicon-cog"></i>
                    <span class="left-title">学校管理</span>
                    <span class="caret"></span>
                </a>
                <ul class="sub-menu">
                    <li><a href="~/Campus/List" data-real="25">校区管理</a></li>
                    <li><a href="~/Course/CourseTypeList" data-real="26">课程类别设置</a></li>
                    <li><a href="~/Course/CourseList" data-real="27">课程设置</a></li>
                    <li><a href="~/Bookfee/List" data-real="28">教材杂项</a></li>
                    <li><a href="~/Classes/List" data-real="29">班级设置</a></li>
                    <li class="divider"></li>
                </ul>
            </li>
        </ul>
        <!-- END SIDEBAR MENU -->
    </div>

    <div id="mainContent" class="page-content">
        @RenderBody()
    </div>
    <hr/>
</div>
<div class="footer">
    <div class="footer-inner">
        <p>&copy; @DateTime.Now.Year - My ASP.NET Application</p>
    </div>
</div>
<script>
    var listStr = '@WebApplicationContext.RoleMenuList';
    var reg = /&quot;/g;
    var listStrAll = listStr.replace(reg, "\"");
    var context = {
        RoleMenuList: eval(listStrAll)
    };
    var hide = false;
    //$('a.dropdown-toggle')
    //    .mouseover(function() {
    //        $(this).parent().addClass('open');
    //    });

    //$('li.dropdown').mouseover(function () {
    //    $(this).addClass('open');
    //}).mouseout(function () {
    //    $(this).removeClass('open');
    //});
    $(document)
        .ready(function () {
            App.init();
            //$("ul.dropdown-menu li a")
            //    .each(function() {
            //        var realId = this.dataset.real;
            //        if (typeof (realId) != "undefined") {
            //            var isExist = false;
            //            for (var i = 0; i < context.RoleMenuList.length; i++) {
            //                var menu = context.RoleMenuList[i];
            //                if (menu.menuId == realId) {
            //                    isExist = true;
            //                }
            //            }
            //            if (isExist) {
            //                $(this).show();
            //            } else {
            //                $(this).remove();
            //            }
            //        }
            //    });
            //$("a.dropdown-toggle")
            //    .each(function() {
            //        var realId = this.dataset.real;
            //        if (typeof (realId) != "undefined") {
            //            var isExist = false;
            //            for (var i = 0; i < context.RoleMenuList.length; i++) {
            //                var menu = context.RoleMenuList[i];
            //                if (menu.menuId == realId) {
            //                    isExist = true;
            //                }
            //            }
            //            if (isExist) {
            //                $(this).show();
            //            } else {
            //                $(this).remove();
            //            }
            //        }
            //    });
        });
</script>
</body>
</html>