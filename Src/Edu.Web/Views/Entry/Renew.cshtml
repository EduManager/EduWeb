@model IEnumerable<Edu.Model.Core.Entry>
@{
    ViewBag.Title = "List";
}
<ol class="breadcrumb">
    <li>办理续费</li>
</ol>
<div class="row well well-sm" style="margin:10px 0px;">
    <div class="col-md-12">
        <div class="form-group">
            <label for="txtName" class="col-sm-1 control-label">姓名</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="txtName" name="txtName" placeholder="请输入学生姓名">
            </div>
            <label for="txtTel" class="col-sm-1 control-label">电话尾号</label>
            <div class="col-sm-3">
                <input type="text" class="form-control" id="txtTel" name="txtTel" placeholder="请输入电话尾号">
            </div>
            <div class="col-sm-3">
                <button class="btn btn-primary" data-toggle="modal"><span class="glyphicon glyphicon-search">  </span> 查询</button>

            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>姓名</th>
                    <th>性别</th>
                    <th>年龄</th>
                    <th>电话</th>
                    <th>课程</th>
                    <th>班级</th>
                    <th>代课教师</th>
                    <th>实收费用</th>
                    <th>状态</th>
                    <th>报名时间</th>
                    <th>经办校区</th>
                    <th>经办人</th>
                    <th><span class="glyphicon glyphicon-align-justify"></span></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.StudentName</td>
                        @{
                            if (item.Sex == 1)
                            {
                                <td>男</td>
                            }
                            else if (item.Sex == 0)
                            {
                                <td>女</td>
                            }
                            else
                            {
                                <td></td>
                            }
                        }
                        <td>@item.Age</td>
                        <td>@item.Tel</td>
                        <td>@item.CourseName</td>
                        <td>@item.ClassName</td>
                        <td>@item.Teacher</td>
                        <td>@item.RealExpenses</td>
                        <td>@item.State</td>
                        <td>
                            @if (item.opttime != null)
                            {
                                @item.opttime.Value.ToString("yyyy-MM-dd hh:mm:ss")
                            }
                        </td>
                        <td>@item.RegionName</td>
                        <td>@item.OperatorName</td>
                        <td>
                            <div class="btn-group">
                                <button class="btn btn-primary" data-toggle="modal" data-target="#ObjModal"> <i class="glyphicon glyphicon-jpy"></i> 续费</button>
                            </div>
                        </td>
                    </tr>
                            }
            </tbody>
        </table>
    </div>
    <!-- 模态框（Modal）续费 -->
    <div class="modal fade" id="ObjModal" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true" data-backdrop="false">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h5 class="modal-title" id="renewModalLabel"></h5>
                </div>
                <div class="modal-body">
                    <div class="form-horizontal" id="addClassForm" role="form">
                        <div class="row">
                            <div class="col-mb-12 col-sm-12">
                                <div class="form-group">
                                    <label for="txtClassName1" class="col-sm-2 control-label">报名班级</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="txtClassName1" name="txtClassName1" readonly>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-mb-12 col-sm-12">
                                <div class="form-group">
                                    <label for="txtShouldFee" class="col-sm-2 control-label">学费计算</label>

                                    <div class="col-sm-3">
                                        <input type="text" class="form-control" id="txtDiscount" value="0" onchange="calcTuition();" />
                                    </div>
                                    <div class="col-sm-1 text-center">
                                        <label class="control-label glyphicon glyphicon-remove"></label>
                                    </div>
                                    <div class="col-sm-3 form-inline">
                                        <input type="number" maxlength='3' style="width:80px;" class="form-control" id="txtClassCount" name="txtClassCount" value="10" onchange="calcTuition();" />
                                        <label class="control-label">课时</label>
                                    </div>
                                    <div class="col-sm-3 form-inline">
                                        <select id="selectDiscount" class="form-control">
                                            <option value="0">原价</option>
                                            <option value="1">打折</option>
                                            <option value="2">优惠</option>
                                        </select>
                                        <input type="text" style="width:60px;" class="form-control hidden" id="txtDiscount" value="0" onchange="calcTuition();" />
                                        <select style="width:80px;" id="selectDiscountValue" class="form-control hidden" onchange="calcTuition();">
                                            <option value="1"></option>
                                            <option value="0.99">99</option>
                                            <option value="0.98">98</option>
                                            <option value="0.96">96</option>
                                            <option value="0.95">95</option>
                                            <option value="0.90">90</option>
                                            <option value="0.85">85</option>
                                            <option value="0.80">80</option>
                                            <option value="0.75">75</option>
                                            <option value="0.70">70</option>
                                            <option value="0.60">60</option>
                                            <option value="0.50">50</option>
                                        </select>
                                        <label id="lblDiscountType" style="margin-left:5px;margin-right:5px;" class="control-label hidden">元</label>

                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-mb-12 col-sm-12">
                                <div class="form-group">
                                    <label for="txtRealFee" class="col-sm-2 control-label">使用余额</label>
                                    <div class="col-sm-10">
                                        <input type="text" class="form-control" id="txtRealFee" name="txtRealFee">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-mb-12 col-sm-12">
                                <div class="form-group">
                                    <label for="txtRealFee" class="col-sm-2 control-label">上课时间</label>
                                    <div class="col-sm-4">
                                        <div class='input-group date' id='datepicker1'>
                                            <input id="txtDatepicker1" type='text' class="form-control" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                    <div class="col-sm-4">
                                        <div class='input-group date' id='datepicker2'>
                                            <input id="txtDatepicker2" type='text' class="form-control" />
                                            <span class="input-group-addon">
                                                <span class="glyphicon glyphicon-calendar"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-mb-12 col-sm-12">
                                <div class="form-group">
                                    <label for="selectCampus" class="col-sm-2 control-label">经办校区</label>
                                    <div class="col-sm-4">
                                        <select id="selectCampus" class="form-control"></select>
                                    </div>
                                    <label for="txtOptor" class="col-sm-2 control-label">经办人</label>
                                    <div class="col-sm-4">
                                        <input type="text" class="form-control" id="txtOptor" name="txtOptor">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-mb-12 col-sm-12">
                                <div class="form-group">
                                    <label for="selectPayType" class="col-sm-2 control-label">支付方式</label>
                                    <div class="col-sm-4">
                                        <select id="selectPayType" class="form-control">
                                            <option value="现金">现金</option>
                                            <option value="刷卡">刷卡</option>
                                            <option value="微信">微信</option>
                                            <option value="支付宝">支付宝</option>
                                        </select>
                                    </div>
                                    <label for="selectPayType" class="col-sm-2 control-label">办理日期</label>
                                    <div class='col-sm-3 input-group date' id='datepicker3'>
                                        <input id="txtDatepicker3" type='text' class="form-control" />
                                        <span class="input-group-addon">
                                            <span class="glyphicon glyphicon-calendar"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-mb-12 col-sm-12">
                                <div class="form-group">
                                    <label for="txtRemark" class="col-sm-2 control-label">备注</label>

                                    <div class="col-sm-9">
                                        <input type="text" style="max-width:800px;" class="form-control" id="txtRemark" value="0"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                        取消
                    </button>
                    <button type="button" class="btn btn-primary" id="btnAddEntry">
                        确定
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal -->
    </div>
</div>
<script>
    function fullData() {

    }
    function editData() {

    }
    var pageInfo = {
        pageIndex: parseInt('@ViewData["PageIndex"]'),
        pageCount: parseInt('@ViewData["PageCount"]'),
        pageSize: parseInt('@ViewData["PageSize"]')
    };

    $(document).ready(function () {

        $('#ulPaging')
            .bootstrapPaginator({
                currentPage: pageInfo.pageIndex, //当前的请求页面。
                totalPages: pageInfo.pageCount, //pageInfo.pageCount, //一共多少页。
                size: "normal", //应该是页眉的大小。
                bootstrapMajorVersion: 3, //bootstrap的版本要求。
                alignment: "right",
                numberOfPages: numberOfPage, //一页列出多少数据。
                itemTexts: function (type, page, current) { //如下的代码是将页眉显示的中文显示我们自定义的中文。
                    switch (type) {
                        case "first":
                            return "首页";
                        case "prev":
                            return "上一页";
                        case "next":
                            return "下一页";
                        case "last":
                            return "末页";
                        case "page":
                            return page;
                    }
                },
                onPageClicked: function (event, originalEvent, type, page) {
                    if (page != pageInfo.pageIndex)
                        window.location.href = "Renew?pageIndex=" + page;
                }
            });


    });
</script>